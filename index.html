<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>oliiiiiiiiii</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="p-6 max-w-3xl mx-auto">
  <h1 class="text-3xl font-bold mb-4">文章列表</h1>
  <ul id="posts" class="list-disc pl-5"></ul>
  <script>
    fetch('/post.php')
      .then(res => res.json())
      .then(data => {
        const container = document.getElementById('posts');
        data.forEach(post => {
          const wrapper = document.createElement('div');
          wrapper.className = 'p-4 border rounded space-y-1';

          const titleLink = document.createElement('a');
          titleLink.className = 'text-blue-600 text-lg font-bold hover:underline';
          titleLink.href = `/post.php?name=${encodeURIComponent(post.slug)}`;
          titleLink.textContent = post.title;

          const date = document.createElement('p');
          date.className = 'text-sm text-gray-500';
          date.textContent = post.date;

          const summary = document.createElement('p');
          summary.textContent = post.summary;

          wrapper.appendChild(titleLink);
          if (post.date) wrapper.appendChild(date);
          if (post.summary) wrapper.appendChild(summary);

          container.appendChild(wrapper);
        });

      })
      .catch(err => {
        const container = document.getElementById('posts');
        container.innerHTML = `<p class="text-red-500">發生錯誤：${err.message}</p>`;
      });
  </script>

</body>
</html>